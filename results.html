<!-Doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="stylesheet.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
<style>
#map {
        height: 400px;
        width: 100%;
       }
</style>
<script>

$('window').on('load', function(){
	$('results').hide();
});

</script>

<script type="text/javascript" src="backend.js"></script>
</head>
<body>
<div class="navbar navbar-default navbar-static-top" id = "NavBar">
<ul>
  <li><a href="index.html" class="button"> HOME </a></li>
  <li><a href="results.html" class="button"> RESULTS </a></li>
</ul>
</div>

<h1>Recommendations</h1>

<div id="results">
<table>
	<tr>
		<th> Picture </th>
		<th> Name </th>
		<th> Price </th>
		<th> Rating </th>
		<th> Review Count </th>
		<th> Distance </th>
	</tr>
	<tr> 
	<th> <img src="getSRC()"> </th>
	<th> <%= data.name %> </th>
	<th> <%= data.price %> </th>
	<th> <img id="rating_src"> </th>
	<th> <%= data.review_count %> </th>
	<th> <%= data.distance %> </th>
	</tr>
</table>

</div>
<p id="srcurl"> </p>
<div id="map"></div>

<script>
window.latitude = <%= data.latitude %>;
window.longitude = <%= data.longitude %>;

var rating = <%= data.rating %>;

function getRatingURL(rating){
var src;
  switch(rating){
    case 0:
      src = "/images/0.png";
      break;
    case 1:
      src = "/images/1.png";
      break;
    case 1.5:
      src = "/images/1_half.png";
      break;
    case 2:
      src = "/images/2.png";
      break;
    case 2.5:
      src = "/images/2_half.png";
      break;
    case 3:
      src = "/images/3.png";
      break;
    case 3.5:
      src = "/images/3_half.png";
      break;
    case 4:
      src = "/images/4.png";
      break;
    case 4.5:
      src = "images/4_half.png";
      break;
    case 5:
      src = "/images/5.png";
      break;
  }
  document.getElementById("rating").src = src;
}


function getSRC(){
 	var src = <%= data.src %>;
 	document.getElementById("srcurl").innerHTML=src;
 	return src;
}


      function initMap() {

        var uluru =new google.maps.LatLng(window.latitude, window.longitude);
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 18,
          center: uluru
        });
        var marker = new google.maps.Marker({
          position: uluru,
          map: map
        });
      }
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAzU_JDzOxBsPCvWRWlq6fsd7PvVBYdmpw&callback=initMap">
    </script>


</body>

</html>